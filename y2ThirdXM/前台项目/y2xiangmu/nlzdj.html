<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="fonts/font_4aigx4do0lb/iconfont.css" />
		<link rel="stylesheet" href="css/bootstrapStyle/bootstrapStyle.css" type="text/css">
		<style>
			
			#tbss{
				padding: 1em 2em;
				display: flex;
			}
			
			.shang{
			    margin-top: 10px;
			    padding-top: 10px;
			    padding-left:15px;
		   	}
		   	
		   	.guan{
			    font-size: 35px;
			}
			
		</style>
	</head>
	<body>
	<div id="ctx">
		
				
		<!--离职打开模态框-->
		<div class="modal fade" tabindex="-1" role="dialog" id="lzdjdk">
			<div class="modal-dialog" role="document" style="width:800px;">
				<div class="modal-content">
					<div class="modal-header" style="height: 60px;" >
	           			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="guan">&times;</span></button>
	           			<h4 class="modal-title" style="margin-top:5px;">员工详情</h4>
	          			<div class="col-md-9"></div>
			           	<div >
			             	<button type="button" class="btn btn-success" data-dismiss="modal" style="margin-top: -50px;margin-left: 100px; vertical-align: middle; width: 60px;">关闭</button>
			          	</div>
     				</div>
					<div class="row modal-body"  style="margin-top: -30px; ">
						<div class="shang">
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工编号:</span>
									<input type="text" v-model="bydkyg.yuanno" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >员工姓名:</span>
									<input type="text" v-model="bydkyg.yuanname" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >员工性别:</span>
									<select v-model="bydkyg.sex" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="男">男</option>
										<option value="女">女</option>
									</select>
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >所在门店:</span>
									<input type="text" value="成高" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >所在部门:</span>
									<select v-model="djhqyg.bumenid"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option :value="bydkyg.bumenid">{{djhqyg.bumenname}}</option>
									</select>
									
									<span class="input-group-addon" >登录账号:</span>
									<input type="text" v-model="bydkyg.login" class="form-control"  aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工岗位:</span>
									<select v-model="bydkyg.gangweid"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option v-for="item in yggw" :value="item.gangweid">{{item.gangweiname}}</option>
									</select>
									
									<span class="input-group-addon" >身体状况:</span>
									<input type="text" v-model="bydkyg.bodystate" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >员工身高:</span>
									<input type="text" v-model="bydkyg.height" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工籍贯:</span>
									<select v-model="bydkyg.jiguan"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="北京">北京</option>
										<option value="湖南">湖南</option>
										<option value="上海">上海</option>
										<option value="深圳">深圳</option>
									</select>
									
									<span class="input-group-addon" >员工民族:</span>
									<select v-model="bydkyg.minzu"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="汉">汉</option>
										<option value="满">满</option>
										<option value="蒙">蒙</option>
									</select>
									
									<span class="input-group-addon" >婚姻状况:</span>
									<select v-model="bydkyg.hunyin"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="未婚">未婚</option>
										<option value="已婚">已婚</option>
									</select>
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工学历:</span>
									<select v-model="bydkyg.xueli"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="初等教育">初等教育</option>
										<option value="中等教育">中等教育</option>
										<option value="高等教育">高等教育</option>
									</select>
									
									<span class="input-group-addon" >毕业学校:</span>
									<select v-model="bydkyg.biye"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="北京大学">北京大学</option>
										<option value="清华大学">清华大学</option>
									</select>
									
									<span class="input-group-addon" >员工专业:</span>
									<select v-model="bydkyg.zhuanye"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="计算机软件">计算机软件</option>
										<option value="网络工程">网络工程</option>
									</select>
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >专业资格:</span>
									<select v-model="bydkyg.zhuanyezg"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="初级工程师">初级工程师</option>
										<option value="中级工程师">中级工程师</option>
										<option value="高级工程师">高级工程师</option>
									</select>
									
									<span class="input-group-addon" >员工属性:</span>
									<select v-model="bydkyg.shuxingid" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option v-for="item in ygsx" :value="item.shuxingid">{{item.shuxingname}}</option>
									</select>
									
									<span class="input-group-addon" >员工学位:</span>
									<select v-model="bydkyg.xuewei"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="本科">本科</option>
										<option value="硕士">硕士</option>
										<option value="博士">博士</option>
									</select>
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工编制:</span>
									<select v-model="bydkyg.bianzhi"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="劳务派遣">劳务派遣</option>
										<option value="劳务外包">劳务外包</option>
										<option value="正式员工">正式员工</option>
									</select>
									
									<span class="input-group-addon" >身份证号:</span>
									<input type="text" v-model="bydkyg.idcard" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >户口地址:</span>
									<input type="text" v-model="bydkyg.huaddress" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
						
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >现住地址:</span>
									<input type="text" v-model="bydkyg.nowaddress" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >联系电话:</span>
									<input type="text" v-model="bydkyg.phone" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >手机号码:</span>
									<input type="text" v-model="bydkyg.shouji" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>

							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工邮箱:</span>
									<input type="text" v-model="bydkyg.email" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >开户银行:</span>
									<select v-model="bydkyg.bank"  class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle; width:160px; height:33px;">
										<option value="建设银行">建设银行</option>
										<option value="中国银行">中国银行</option>
										<option value="交通银行">交通银行</option>
									</select>
									
									<span class="input-group-addon" >银行账号:</span>
									<input type="text" v-model="bydkyg.cardnumber" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
						
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >推荐人员:</span>
									<input type="text" v-model="bydkyg.tuijian" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >减免权力:</span>
									<input type="text" v-model="bydkyg.jianmian" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >入职日期:</span>
									<input type="date" v-model="bydkyg.bei3" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
						
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >试用到期:</span>
									<input type="date" v-model="bydkyg.shiyong" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >出生日期:</span>
									<input type="date" v-model="bydkyg.birthday" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >合同开始:</span>
									<input type="date" v-model="bydkyg.hetongstart" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
						
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >合同结束:</span>
									<input type="date" v-model="bydkyg.hetongend" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >卡自编号:</span>
									<input type="text" v-model="bydkyg.kazi" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >卡内编号:</span>
									<input type="text" v-model="bydkyg.kanei" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >紧急联系:</span>
									<input type="text" v-model="bydkyg.empeople" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >紧急电话:</span>
									<input type="text" v-model="bydkyg.emphone" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
									<span class="input-group-addon" >商品折扣:</span>
									<input type="text" v-model="bydkyg.spzhekou" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									 
								</div>
							</p>
							
							<table>
								<tr>
									<td class="col-md-0">
										<div class="input-group">
														
											<span class="input-group-addon" >工时折扣:</span>
											<input type="text" v-model="bydkyg.gszhekou" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
									
										</div>
									</td>	
									<td class="col-md-7">
										<div class="input-group">
												
											<span class="input-group-addon" >整单折扣:</span>
											<input type="text" v-model="bydkyg.zdzhekou" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px;">
											
										</div>
									</td>
								</tr>
							</table>
					
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!--查询模态框-->
		<div class="modal fade" tabindex="-1" role="dialog" id="cxygmtk">
			<div class="modal-dialog" role="document" style="width:300px;">
				<div class="modal-content">
					<div class="modal-header" style="height: 60px;">
	           			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="guan">&times;</span></button>
	           			<h4 class="modal-title" style="margin-top:5px;">查询</h4>
			           	<div >
			             	<button type="button" class="btn btn-success" data-dismiss="modal" style="margin-top: -50px;margin-left: 180px; vertical-align: middle; width: 60px;" >查询</button>
			          	</div>
     				</div>
					<div class="row modal-body"  style="margin-top: -30px; ">
						<div class="shang">
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工编号:</span>
									<input type="text" class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle ; width:160px; height:33px;">
									
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工姓名:</span>
									<input type="text" class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle ; width:160px; height:33px;">
									
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工性别:</span>
									<select class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle; width:160px; height:33px;">
										<option value="男">男</option>
										<option value="女">女</option>
									</select>
									
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工岗位:</span>
									<select class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle; width:160px; height:33px;">
										<option v-for="item in yggw" :value="item.gangweid">{{item.gangweiname}}</option>
									</select>
									
								</div>
							</p>
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >所在部门:</span>
									<select class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle; width:160px; height:33px;">
										<option value="1">不要忘记先查询记得查询部门的语句不要查询=0的父节点</option>
									</select>
									
								</div>
							</p>
					
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!--离职模态框-->
		<div class="modal fade" tabindex="-1" role="dialog" id="lzmtk">
			<div class="modal-dialog" role="document" style="width:550px;">
				<div class="modal-content">
					<div class="modal-header" style="height: 60px;">
	           			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="guan">&times;</span></button>
	           			<h4 class="modal-title" style="margin-top:5px;">员工离职</h4>
			           	<div>
			           		<button type="button" class="btn btn-success" style="margin-top: -50px;margin-left: 300px; vertical-align: middle; width: 80px;" data-toggle="modal" data-target="#xzyg">选择员工</button>
			             	<button type="button" class="btn btn-success" data-dismiss="modal" style="margin-top: -90px;margin-left: 430px; vertical-align: middle; width: 60px;" @click="lz">离职</button>
			          	</div>
     				</div>
					<div class="row modal-body"  style="margin-top: -30px; ">
						<div class="shang">
							
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >员工姓名:</span>
									<input type="text" v-model="lzbydkyg.yuanname" class="form-control" aria-describedby="basic-addon3" disabled="true" style="vertical-align: middle ; width:160px; height:33px; ">
									

									
									<span class="input-group-addon" >离职日期:</span>
									<input type="date" v-model="lzxqxz.lizhitime" class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle ; width:160px; height:33px;">
									
								</div>
							</p>
						
							<p>
								<div class="input-group" style="margin-top: 20px;">
									
									<span class="input-group-addon" >离职原因:</span>
									<input type="text" v-model="lzxqxz.remark" class="form-control" aria-describedby="basic-addon3" style="vertical-align: middle ; width: 430px; height:33px;">
									
								</div>
							</p>
							
						</div>
					</div>
					<div style=" border: 1px solid #E6E6E6;">
						
						<table class="table table-hover table-bordered" style="overflow:scroll;">
					 
							<tr>
								<td>领用日期</td>
								<td>员工编号</td>
								<td>员工姓名</td>
							</tr>
							
							<tr>
								<td>{{lzbydkyg.bei3}}</td>
								<td>{{lzbydkyg.yuanno}}</td>
								<td>{{lzbydkyg.yuanname}}</td>
							</tr>
						
						</table>
					</div>
				</div>
			</div>
		</div>
		
		<!--选择员工-->
		<div class="modal fade" tabindex="-1" role="dialog" id="xzyg">
			<div class="modal-dialog" role="document" style="width:700px;">
				<div class="modal-content">
					<div class="modal-header" style="height: 60px;">
	           			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="guan">&times;</span></button>
	           			<h4 class="modal-title" style="margin-top:5px;">选择员工</h4>
			           	<div>
			             	<button type="button" class="btn btn-success" data-dismiss="modal" style="margin-top: -50px;margin-left: 580px; vertical-align: middle; width: 60px;">确定</button>
			          	</div>
     				</div>
					<div class="row modal-body"  style="margin-top: -30px; ">
						<div class="shang">
							<div class="col-md-3" style="border: 1px solid #E6E6E6; height:300px; overflow:scroll;">
								
								<ul id="treeDemo" class="ztree"></ul>
								
							</div>
						
							<div class="col-md-9" style="height:300px;  overflow:scroll;">
							
								<table class="table table-hover table-bordered" >
							 
									<tr>
										<td>部门名称</td>
										<td>工号</td>
										<td>姓名</td>
									</tr>
									
									<tr v-for="item in ygcx" @click="lztableDblclick(item)">
										<td>{{item.bumenname}}</td>
										<td>{{item.yuanno}}</td>
										<td>{{item.yuanname}}</td>
									</tr>
								
								</table>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		

		
		<div>
			<div class="row" style="border: 1px solid #E6E6E6;">
				<h3 class="col-md-2">离职登记</h3>
				<div class="col-md-7"></div>
				<div class="col-md-3" id="tbss">
					<input class="form-control input-sm" placeholder="匹配工号/姓名" type="text" style="margin-top: 2px;" />&nbsp;&nbsp;&nbsp;
					<button type="button" class="btn btn-warning" style="width: 150px;">搜索</button>&nbsp;&nbsp;&nbsp;
					<button type="button" class="btn btn-default">关闭</button>
				</div>
			</div>
			
			<div>
				<ol class="breadcrumb">
				 	<li><span class="iconfont" style="vertical-align: middle">&#xe614;</span><a href="#" style="vertical-align: middle" data-toggle="modal" data-target="#lzmtk">员工离职</a></li>
				  	<li><span class="iconfont" style="vertical-align: middle">&#xe6b6;</span><a href="#" style="vertical-align: middle" @click="lzdjhg">员工回滚</a></li>
				  	<li><span class="iconfont" style="vertical-align: middle">&#xe62c;</span><a href="#" style="vertical-align: middle" data-toggle="modal" data-target="#lzdjdk">打开详情</a></li>
				  	<li><span class="iconfont" style="vertical-align: middle">&#xe613;</span><a href="#" style="vertical-align: middle" @click="sclzygsj">删除记录</a></li>
				  	<li><span class="iconfont" style="vertical-align: middle">&#xe78a;</span><a href="#" style="vertical-align: middle" data-toggle="modal" data-target="#cxygmtk">员工查询</a></li>
				  	<!--<li><span class="iconfont" style="vertical-align: middle">&#xe6a5;</span><a href="#" style="vertical-align: middle">导出</a></li>-->
				</ol>
			</div>
			
			<div class="">
				
				<div class="row" id="tbss" style=" border: 1px solid #E6E6E6;height:500px;">
					
				<table class="table table-hover table-bordered" style="width:800px;">
					 
						<tr>
							<td>部门</td>
							<td>员工编号</td>
							<td>姓名</td>
							<td>性别</td>
							<td>职位</td>
							<td>离职日期</td>
							<td>离职原因</td>
						</tr>
						
						<tr v-for="item in cssj" @click="tableDblclick(item)">
							<td>{{item.bumenname}}</td>
							<td>{{item.yuanno}}</td>
							<td>{{item.yuanname}}</td>
							<td>{{item.sex}}</td>
							<td>{{item.zhiwuname}}</td>
							<td>{{item.lizhitime}}</td>
							<td>{{item.remark}}</td>
						</tr>
						
				</table>

			</div>
			
		</div>
	</div>	
	</div>	
<script type="text/javascript" src="js/jquery-1.12.4.js" ></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.ztree.core.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript" src="js/my.js"></script>
<script type="text/javascript">

	var vm = new Vue({
		el: "#ctx",
		data() {
			return {
				cssj:{},//获取初始数据
				bydkyg:{},//打开查询
				djhqyg:{yuanno:"",bumenid:"",bumenname:""},//获得点击的员工id
				lzdjhqyg:{yuanno:""},//获得点击的离职员工id
				yggw:{},//查询岗位
				ygsx:{},//查询员工属性
				ygcx:{},//加载初始员工详情
				lzbydkyg:{},//离职员工查询
				lzxqxz:{},//离职详情新增
				xzygbm:{}//点击树状图获取部门
			}
		},
		created(){//加载事件
      		this.loading();//获取初始数据
      		this.cxyggw();//查询岗位
      		this.cxygshux();//查询员工属性
      		this.cxygcx();//加载初始员工详情
      		this.loadingto();//加载树状图部门
   		},
		methods: {
			loading:function(){//获取初始数据
				$.ajax({
					url: data.ip +"ncq/querycssj",
					type: "get",
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.cssj=result;
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			tableDblclick:function(item){//获得点击的员工id
				vm.djhqyg.yuanno=item.yuanno;
				vm.djhqyg.bumenid=item.bumenid;
				vm.djhqyg.bumenname=item.bumenname;
				console.log(vm.djhqyg.yuanno);
				console.log(vm.djhqyg.bumenid);
				console.log(vm.djhqyg.bumenname);
				$.ajax({//员工查询
					url: data.ip +"ncq/lzdjdk",
					type: "get",
					data:{yuanno:vm.djhqyg.yuanno},
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.bydkyg = result;
						
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			cxyggw:function(){//查询员工岗位
				$.ajax({
					url: data.ip +"ncq/cxyggw",
					type: "get",
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.yggw = result;
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			cxygshux:function(){//查询员工属性
				$.ajax({
					url: data.ip +"ncq/cxygsx",
					type: "get",
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.ygsx = result;
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			lzdjhg:function(){//回滚员工
				$.ajax({
					url:data.ip +"ncq/lzdjhg",
					type:"post",
					data:{yuanno:vm.djhqyg.yuanno},
					dataType:"text",
					success:function(result){
						console.log(result);
						if(result>0){
							alert("回滚成功");
						}else{
							alert("回滚失败");
						}
						vm.loading();
						vm.cxygcx();
					},error:function(result){
						console.log(result);
					}
				});
			},
			cxygcx:function(){//获取初始员工详情数据
				$.ajax({
					url: data.ip +"ncq/ygcx",
					type: "get",
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.ygcx = result;
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			lztableDblclick:function(item){//获得点击的员工id
				vm.lzdjhqyg.yuanno=item.yuanno;
				console.log(vm.lzdjhqyg.yuanno);
				$.ajax({//离职员工查询
					url: data.ip +"ncq/byupygff",
					type: "get",
					data:{yuanno:vm.lzdjhqyg.yuanno},
					dataType: "json",
					success: function(result) {
						console.log(result);
						vm.lzbydkyg = result;						
					},
					error: function(result) {
						console.log(result);
					}	
				});
			},
			lz:function(){//离职登记员工离职
				vm.lzxqxz.yuanno=vm.lzbydkyg.yuanno;
				console.log(vm.lzxqxz.yuanno);
				console.log(vm.lzxqxz.lizhitime);
				console.log(vm.lzxqxz.remark);
				$.ajax({
					url:data.ip +"ncq/insertlzxq",
					type:"post",
					contentType:"application/json;charset=utf-8",
					data:JSON.stringify(vm.lzxqxz),
					dataType:"text",
					success:function(result){
						console.log(result);
						if(result>0){
							alert("离职成功");
						}else{
							alert("离职失败");
						}
						vm.loading();
					},error:function(result){
						console.log(result);
					}
				});
			},
			sclzygsj:function(){//删除离职员工数据
					console.log(vm.djhqyg.yuanno);
					$.ajax({
					url:data.ip +"ncq/sclzygsj",
					type:"post",
					data:{yuanno:vm.djhqyg.yuanno},
					dataType:"text",
					success:function(result){
						console.log(result);
						if(result>0){
							alert("删除成功");
						}else{
							alert("删除失败");
						}
						vm.loading();
					},error:function(result){
						console.log(result);
					}
				});
			},
			loadingto:function(){//获取初始树状图数据
				$.ajax({
					url: data.ip +"ncq/querybm",
					type: "get",
					dataType: "json",
					success: function(result) {
						console.log(result);
						$.fn.zTree.init($("#treeDemo"), setting, result);//初始化树节点时，添加同步获取的数据
						$.fn.zTree.init($("#treeDemo"), setting, result).expandAll(true);//树状图加载好默认打开所有节点
					},
					error: function(result) {
						console.log(result);
					}	
				});
			}
		}
	});
	
	
	//树状图
	var setting = {
		view: {
        	selectedMulti: true,
        	showIcon:false
    	},
		check: {
			enable: false
		},
		data: {
			key: {
                    name: "bumenname",//树节点name名称
                },
			simpleData: {
				enable: true,//是否采用简单数据模式
            	idKey: "bumenid",//树节点ID名称
            	pIdKey: "parentid",//父节点ID名称
            	rootPId: 0,//根节点ID
			}
		},
		 callback:{
			onClick:chooseNode,
		}
	};
	
	//点击树状图获取部门
	function chooseNode(event,treeId,treeNode){
		if (treeNode.parentid=="0") {
			vm.cxygcx();
			return;
		}
		vm.xzygbm=treeNode;
		
		console.log(vm.xzygbm);
		$.ajax({//点击树状图获取部门在根据部门id查询员工详情
			url: data.ip +"ncq/gjbmcxyg",
			type: "get",
			data:{bumenid:vm.xzygbm.bumenid},
			dataType: "json",
			success: function(result) {
				console.log(result);
				vm.ygcx = result;
			},
			error: function(result) {
				console.log(result);
			}	
		});
	}
	

</script>	
</body>
</html>
