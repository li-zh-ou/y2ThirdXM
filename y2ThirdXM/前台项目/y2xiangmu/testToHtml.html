<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>接车登记</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
		<style>
			#bt{
				background:#4b6cb7;
			}
			
			#c{
				background:#bdc3c7;
			}
			
			#body{
				background:#f5f5f5;
			}
			
			#ctx1{
				background:#ffffff;
			}
			
		</style>
	</head>
	<body>
					<div id="body">
						<div class="row" style="margin-top: 18px;margin-left: 50px;margin-bottom: 5px;">
							<div class="input-group">
								<span class="input-group-addon">车牌号</span>
								<input type="text" name="chepai" value="" placeholder="请输入车牌号" style="vertical-align: middle ; width:160px; height:33px;">
							</div>
						</div>
						<table id="ctx1" class="table table-hover table-bordered text-center ">
								<thead>
									<tr id="c">
										<th>车牌号</th>
										<th>车辆型号</th>
										<th>驾驶员姓名</th>
										<th>联系电话</th>
										<th>车辆归属</th>
										<th>车架号</th>
										<th>里程</th>
										<th>载重</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="item in data" ondblclick="colseIframe(this)">
										<td>{{item.chepai}}</td>
										<td>{{item.xinghao}}</td>
										<td>{{item.sijiname}}</td>
										<td>{{item.sijiphone}}</td>
										<td>{{item.guishu}}</td>
										<td>{{item.chejia}}</td>
										<td>{{item.licheng}}</td>
										<td>{{item.zaizhong}}</td>
									</tr>
								</tbody>
						</table>
			        </div>
	</body>
		<script type="text/javascript" src="js/jquery-3.4.1.min .js" ></script>
	<script type="text/javascript" src="js/vue.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js" ></script>
	<script type="text/javascript" src="js/my.js"></script>
	<script type="text/javascript">
		var vm =new Vue({
			el:"#body",
			data(){
				return {
					data:[],
				};
			},
			methods:{
				
			}
		})
		function colseIframe(trObj){
			//此处应回传车牌和维修单号，最为方便。
			var index = $(trObj).index();
			var childIframe=window.parent.document.getElementById("otherHtml");
			window.parent.vm.selectedchepai=childIframe.contentWindow.vm.data[index].chepai;
			window.parent.queryHistory();
			window.parent.queryWXKehuInfo();
			index = null;
			childIframe.remove();
		}

		function load(param){
			$.ajax({
				"url":data.ip +"weixiujieche/queryKeHuCar",
				"data":"chepai="+param,
				"type":"post",
				"success":function(result){
					vm.data = result;
				},"error":function(){
					alert("渲染数据失败！");
				}
			})
		}
		load("");
		
		$("[name='chepai']").bind('keypress',function(event){
			if(event.keyCode=="13"){
				load($("[name='chepai']").val());
			}
		})
	</script>
</html>
